<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Projects</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
:root {
  --black: #000000;
  --gray: #222222;
  --primary: #1DCD9F;
  --accent: #169976;
  --white: #FFFFFF;
}

html, body {
  background: var(--white);
  color: var(--black);
  font-family: 'Segoe UI', Arial, sans-serif;
  margin: 0;
  min-height: 100vh;
}

header {
  background: var(--white);
  position: sticky;
  top: 0;
  z-index: 10;
  box-shadow: 0 0 8px #0001;
  display: flex;
  flex-direction: column;
  align-items: center;
  height: auto;
  padding: 1rem 0;
}

header h1 {
  color: var(--primary);
  font-size: 2.5rem;
  font-weight: 700;
  letter-spacing: 1px;
  margin: 0;
}

.home-btn {
  display: block;
  position: absolute;
  right: 38px;
  top: 20px;
  background: var(--primary);
  color: var(--white);
  border: none;
  border-radius: 2em;
  font-size: 1.08rem;
  padding: 0.6em 1.8em;
  cursor: pointer;
  font-weight: 600;
  text-decoration: none;
  transition: background 0.2s;
  box-shadow: 0 2px 8px 0 #1dcd9f17;
  z-index: 12;
}
.home-btn:hover, .home-btn:focus {
  background: var(--accent);
  color: var(--white);
}

/* Skills row */
.skills-row {
  margin: 1rem auto;
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
}

.skill-btn {
  background: var(--accent);
  border: none;
  color: var(--white);
  padding: 0.3em 1em;
  border-radius: 1em;
  font-size: 0.9em;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.18s, color 0.14s;
}
.skill-btn:hover {
  background: var(--primary);
  color: var(--black);
}

.projects-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr); /* Two projects per row */
  gap: 2rem 1.5rem;
  max-width: 1200px;
  margin: 0 auto;
  padding: 1.5rem 1rem 2.5rem 1rem;
}

/* Card styles */
.project-card {
  background: var(--white);
  border-radius: 2em;
  box-shadow: 0 4px 20px 0 #00000023;
  overflow: hidden;
  position: relative;
  cursor: pointer;
  min-height: 400px;
  display: flex;
  flex-direction: column;
  transition: box-shadow 0.18s;
  border: 1.5px solid #eee;
}

.project-card:hover, .project-card:focus-within {
  box-shadow: 0 8px 32px 0 #00000032;
}

.card-img {
  width: 100%;
  aspect-ratio: 1/1; 
  object-fit: cover;
  background: #eee;
  transition: filter 0.35s;
}

.card-info {
  background: var(--white);
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 50px; /* Adjusted for the title */
  position: relative;
  z-index: 2;
  padding: 0.35em; /* Reduced padding */
}

.card-title-slide {
  font-size: 1.23em;
  font-weight: 700;
  color: var(--accent);
  text-align: center;
}

.card-details {
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--white);
  color: var(--black);
  border-bottom-left-radius: 2em;
  border-bottom-right-radius: 2em;
  box-shadow: 0 8px 22px 0 #00000021;
  padding: 0 1.6em 1.6em 1.6em;
  transform: translateY(100%);
  transition: transform 0.31s cubic-bezier(.68,-0.55,.27,1.55);
  z-index: 3;
  min-height: 230px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  white-space: normal;
  pointer-events: none;
  opacity: 0.98;
}

.project-card:hover .card-details,
.project-card:focus-within .card-details {
  transform: translateY(0%);
  pointer-events: auto;
}

.card-section-label {
  font-weight: 700;
  margin-top: 0.5em;
  color: var(--primary);
  font-size: 1em;
}

.card-summary {
  margin: 0.2em 0 0.9em 0;
  font-size: 0.9em;
}

.card-achievements {
  margin: 0.2em 0 0.9em 0;
  font-size: 0.9em; 
  padding-left: 1em;
}

.card-achievements li {
  margin-bottom: 0.33em;
  font-size: 1em;
}

.card-skills {
  margin-top: 0.9em;
  display: flex;
  gap: 0.5em;
  flex-wrap: wrap;
  padding-bottom: 0.2em;
}

.card-skill-btn {
  background: var(--accent);
  color: var(--white);
  border: none;
  border-radius: 1em;
  padding: 0.37em 1em;
  font-size: 0.93em;
  font-weight: 600;
  margin-bottom: 0.3em;
  cursor: pointer;
  transition: background 0.17s, color 0.15s;
}
.card-skill-btn:hover {
  background: var(--primary);
  color: var(--black);
}

/* Hide default focus for card, show for home-btn */
.project-card:focus { outline: none; }
.home-btn:focus { outline: 2px solid var(--primary); }

@media (max-width: 700px) {
  .projects-grid {
      grid-template-columns: 1fr; /* Single column for smaller screens */
  }
  header h1 { font-size: 1.6rem; }
  .home-btn { 
    font-size: 1em;
    padding: 0.35em 1.2em;
    top: 18px;
    right: 9px;
  }
  .card-img { height: 120px;}
  .project-card .card-title-slide,
  .card-title { font-size: 1em;}
}
  </style>
</head>
<body>
  <header>
    <h1>Projects</h1>
    <a href="index.html" class="home-btn">Home</a>
    <section class="skills-row" id="skills-row">
      <button class="skill-btn" onclick="showAllProjects()">All</button>
      <!-- Skill buttons will be populated here -->
    </section>
  </header>
  <main>
    <div id="projects-container" class="projects-grid">
      <!-- Project cards will be inserted here by JS -->
    </div>
  </main>
<script>
const projects = [
  {
    key: "eeg-robot",
    title: "EEG Controlled Bipedal Robot",
    images: ["assets/eeg_robot1.jpg", "assets/eeg_robot2.jpg"],
    summary: "Integrating EEG signals with deep learning for movement classification and precise motor control.",
    scores: { "3D print": 8, "CAD": 9, "PCB design": 7 },
    achievements: [
      "Optimized robot structure with CAD design through SolidWorks for enhanced stability and mobility.",
      "3D printed components for prototyping.",
      "PCB design for the overcurrent protection circuit, ensuring reliable power management."
    ]
  },
  {
    key: "exoskeleton-sim",
    title: "Exoskeleton Validation with Simulation",
    images: ["assets/exo1.jpg"],
    summary: "Validated exoskeleton assistance efficacy by analyzing biomechanical load reduction.",
    scores: { "OpenSim": 10, "MATLAB": 8, "motion capture": 6 ,"EMG":6, "Metabolic Cost":6},
    achievements: [
      "Processed marker-based motion data from lifting activities to quantify joint kinematics and dynamics.",
      "Simulated the assistance of exoskeleton and analyzed muscle activation reduction.",
      "Researched and troubleshooted solutions to optimize exoskeleton for ergonomic performance."
    ]
  },
  {
    key: "swing-footrest",
    title: "Adaptive Swing Footrest for Wheelchair",
    images: ["assets/footrest1.jpg", "assets/footrest2.jpg", "assets/footrest3.jpg"],
    summary: "Designed a footrest mechanism supporting natural leg motion and user comfort.",
    scores: { "3D print": 7, "CAD": 8 },
    achievements: [
      "Designed the footrest mechanism using SolidWorks and fabricated components through 3D printing.",
      "Conducted iterative testing and Failure Modes and Effects Analysis.",
      "Integrated material selection and cost analysis to enhance durability, recyclability, and affordability."
    ]
  },
  {
    key: "bracket-gen-design",
    title: "Generative Design of Bracket",
    images: ["assets/bracket1.jpg", "assets/bracket2.jpg", "assets/bracket3.jpg"],
    summary: "Redesigned an aircraft bracket for additive manufacturing to reduce weight and waste.",
    scores: { "CAD": 10, "3D print": 5 },
    achievements: [
      "Conducted generative design and stress analysis in Fusion 360 under defined load cases.",
      "Selected optimal design based on factor of safety and von Mises stress vs. mass.",
      "Improved printability and reduced waste by optimizing for 3D printing and high-volume production."
    ]
  }
];

// Step 1: Collect total scores for skills
const skillScores = {};
projects.forEach(p => {
  for (const [skill, score] of Object.entries(p.scores)) {
    if (!skillScores[skill]) {
      skillScores[skill] = 0;
    }
    skillScores[skill] += score;
  }
});

// Step 2: Create skill buttons ordered by the total scores
const skillsBar = document.getElementById('skills-row');
const sortedSkills = Object.entries(skillScores).sort((a, b) => b[1] - a[1]);

sortedSkills.forEach(([skill, score]) => {
  const btn = document.createElement('button');
  btn.className = 'skill-btn';
  btn.textContent = skill;
  btn.onclick = () => filterProjects(skill);
  skillsBar.appendChild(btn);
});

// Step 3: Function to create project cards
const createProjectCards = (filteredProjects) => {
  const projectsContainer = document.getElementById('projects-container');
  projectsContainer.innerHTML = ''; // Clear existing cards
  filteredProjects.forEach(project => {
    const card = document.createElement('div');
    card.className = 'project-card';
    card.tabIndex = 0; // keyboard a11y

    const coverImg = project.images && project.images.length > 0 ? project.images[0] : '';

    // Get the top 3 skills
    const topSkills = Object.entries(project.scores)
      .sort(([, a], [, b]) => b - a)
      .slice(0, 3)
      .map(([skill]) => skill);

        card.innerHTML = `
      <img class="card-img" src="${coverImg}" alt="Screenshot of ${project.title}">
      <div class="card-info">
        <div class="card-title-slide">${project.title}</div>
      </div>
      <div class="card-details">
        <div class="card-title-slide">${project.title}</div> <!-- Moved title here -->
        <div class="card-desc-block">
          <div class="card-section-label">Summary</div>
          <div class="card-summary">${project.summary || ""}</div>
          <div class="card-section-label">Achievements</div>
          <ul class="card-achievements">
            ${(project.achievements || []).map(a => `<li>${a}</li>`).join("")}
          </ul>
        </div>
        <div class="card-skills">
          ${topSkills.map(skill => `<button class="card-skill-btn" onclick="filterProjects('${skill}')">${skill}</button>`).join("")}
        </div>
      </div>
    `;

    projectsContainer.appendChild(card);
  });
}

// Step 4: Function to filter projects based on selected skill
const filterProjects = (selectedSkill) => {
  const filteredProjects = projects.filter(project => project.scores[selectedSkill]);
  const sortedFilteredProjects = filteredProjects.sort((a, b) => {
    const aScore = a.scores[selectedSkill] || 0; 
    const bScore = b.scores[selectedSkill] || 0;
    return bScore - aScore;
  });
  createProjectCards(sortedFilteredProjects);
};

// Step 5: Function to show all projects
const showAllProjects = () => {
  createProjectCards(projects);
};

// Initial display of all projects
createProjectCards(projects);
</script>
</body>
</html>
